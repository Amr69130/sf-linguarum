{% extends 'base.html.twig' %}

{% block title %}
  Bienvenue sur Linguarum
{% endblock %}

{% block body %}
  <div class="min-h-screen bg-cover bg-center p-10" style="background-image: url('{{ asset('images/bg2.jpg') }}');">
    <h2 class="text-3xl font-bold mb-10 text-center">Arbre généalogique des langues</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {% for language in languages %}
        {% if language.parent is null %}
          <div class="group relative">
            <a href="{{ path('language_details', { id: language.id }) }}" class="block p-6 bg-white/10 backdrop-blur-md rounded-xl shadow-lg hover:shadow-2xl hover:bg-indigo-600 hover:text-white transition-all duration-300">
              <h3 class="text-xl font-bold mb-4">{{ language.name }}</h3>
              <p class="text-gray-200 text-sm">{{ language.description }}</p>
            </a>

            {% if (language.children|length) > 0 %}
              <div class="ml-6 mt-4 space-y-3">
                {% for child in language.children %}
                  <div class="pl-4">
                    <a href="{{ path('language_details', { id: child.id }) }}" class="block p-4 bg-white/10 backdrop-blur-md rounded-xl hover:bg-indigo-500 hover:text-white transition-all">↳ {{ child.name }}</a>

                    {% if (child.children|length) > 0 %}
                      <div class="ml-6 mt-2 space-y-2">
                        {% for grandchild in child.children %}
                          <a href="{{ path('language_details', { id: grandchild.id }) }}" class="block p-3 bg-white/10 backdrop-blur-md rounded-xl hover:bg-indigo-400 hover:text-white transition-all text-sm">↳ {{ grandchild.name }}</a>
                        {% endfor %}
                      </div>
                    {% endif %}
                  </div>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endblock %}
