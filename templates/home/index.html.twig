{% extends 'base.html.twig' %}

{% block title %}
  Bienvenue sur Linguarum
{% endblock %}

{% block body %}
  <div class="min-h-screen bg-cover bg-center p-10" style="background-image: url('{{ asset('images/bg2.jpg') }}');">
    <h2 class="text-3xl font-bold mb-10 text-center text-gray-900 drop-shadow">Arbre généalogique des langues</h2>
    <p>Voici une liste non exhaustive de quelques familles de langues ainsi que leurs sous-familles</p>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {% for language in languages %}
        {% if language.parent is null %}
          <div class="group relative">
            <!-- Langue mère -->
            <a href="{{ path('language_details', { id: language.id }) }}" class="block p-6 rounded-xl shadow-lg border border-white/30 bg-white/10 backdrop-blur-xl hover:bg-white/20 transition-all duration-300">
              <h3 class="text-xl font-bold mb-4 text-gray-900">{{ language.name }}</h3>
              <p class="text-gray-800 text-sm">{{ language.description }}</p>
            </a>

            {% if (language.children|length) > 0 %}
              <div class="ml-6 mt-4 border-l-2 border-indigo-300 pl-4 space-y-3">
                {% for child in language.children %}
                  <!-- Langue enfant -->
                  <a href="{{ path('language_details', { id: child.id }) }}" class="block p-4 rounded-lg border border-white/30 bg-white/10 backdrop-blur-xl hover:bg-white/20 transition-all">↳ <span class="text-gray-900">{{ child.name }}</span></a>

                  {% if (child.children|length) > 0 %}
                    <div class="ml-6 mt-2 border-l-2 border-indigo-200 pl-4 space-y-2">
                      {% for grandchild in child.children %}
                        <!-- Sous-langue -->
                        <a href="{{ path('language_details', { id: grandchild.id }) }}" class="block p-3 rounded-md border border-white/30 bg-white/10 backdrop-blur-xl hover:bg-white/20 transition-all text-sm">↳ <span class="text-gray-900">{{ grandchild.name }}</span></a>
                      {% endfor %}
                    </div>
                  {% endif %}
                {% endfor %}
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endblock %}
